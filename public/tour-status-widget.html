<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aurora Viking Tour Status</title>
</head>

<body style="margin:0;padding:0;background:transparent;">
    <!-- 
    Aurora Viking Tour Status Widget
    Embed this in Wix using: Add > Embed Code > Custom Embeds > Embed HTML
  -->
    <div id="aurora-tour-status"
        style="font-family: Georgia, serif; background: transparent; padding: 8px 20px; text-align: center;">
        <div style="color: #d4af37; font-size: 13px; margin-bottom: 2px; letter-spacing: 1px;">Northern Lights Tour
        </div>
        <div id="status-line" style="display: flex; align-items: center; justify-content: center; gap: 6px;">
            <span style="color: #94a3b8; font-style: italic;">Loading...</span>
        </div>
    </div>
    <script>
        (async function () {
            const API = 'https://us-central1-aurora-viking-staff.cloudfunctions.net/getTourStatus';
            const line = document.getElementById('status-line');
            try {
                const res = await fetch(API);
                const d = await res.json();
                const date = d.displayDate || new Date().getDate() + '.' + ['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN', 'JUL', 'AUG', 'SEP', 'OCT', 'NOV', 'DEC'][new Date().getMonth()];
                const s = d.status;
                const color = s === 'ON' ? '#4ade80' : s === 'OFF' ? '#f87171' : '#94a3b8';
                const emoji = s === 'ON' ? '‚úÖ' : s === 'OFF' ? 'üòû' : '‚ùì';
                const text = s === 'ON' ? 'ON' : s === 'OFF' ? 'OFF' : 'TBD';
                line.innerHTML = `<span style="color:#d4af37;font-size:14px;font-weight:bold">${date}</span><span style="color:#d4af37;font-size:14px;margin:0 4px">is</span><span style="color:${color};font-size:14px;font-weight:bold">${text}</span><span style="font-size:14px">${emoji}</span>`;
            } catch (e) { line.innerHTML = '<span style="color:#94a3b8">Loading...</span>'; }
            setInterval(arguments.callee, 300000);
        })();
    </script>
</body>

</html>